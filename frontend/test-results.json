
> chat-frontend@1.0.0 test
> vitest --run --reporter=json

{"numTotalTestSuites":6,"numPassedTestSuites":6,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":39,"numPassedTests":10,"numFailedTests":29,"numPendingTests":0,"numTodoTests":0,"startTime":1768799515457,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["","useChatRoom"],"fullName":" useChatRoom should join room and emit join_room event","status":"failed","title":"should join room and emit join_room event","duration":10,"failureMessages":["expected \"spy\" to be called with arguments: [ 'join_room', 'test-room-1' ]\u001b[90m\n\nReceived: \n\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[39m"],"location":{"line":49,"column":29}},{"ancestorTitles":["","useChatRoom"],"fullName":" useChatRoom should send message via socket","status":"failed","title":"should send message via socket","duration":1,"failureMessages":["expected \"spy\" to be called with arguments: [ 'send_message', …(1) ]\u001b[90m\n\nReceived: \n\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[39m"],"location":{"line":69,"column":29}},{"ancestorTitles":["","useChatRoom"],"fullName":" useChatRoom should receive message and update store","status":"failed","title":"should receive message and update store","duration":4,"failureMessages":["expected [] to deep equally contain { id: 'msg-1', …(4) }"],"location":{"line":100,"column":28}},{"ancestorTitles":["","useChatRoom"],"fullName":" useChatRoom should handle user joined event","status":"failed","title":"should handle user joined event","duration":0,"failureMessages":["expected 0 to be greater than 0"],"location":{"line":126,"column":31}},{"ancestorTitles":["","useChatRoom"],"fullName":" useChatRoom should leave room and clean up","status":"failed","title":"should leave room and clean up","duration":1,"failureMessages":["expected \"spy\" to be called with arguments: [ 'leave_room', 'test-room-1' ]\u001b[90m\n\nReceived: \n\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[39m"],"location":{"line":152,"column":29}},{"ancestorTitles":["","useChatRoom"],"fullName":" useChatRoom should handle concurrent messages in order","status":"failed","title":"should handle concurrent messages in order","duration":3,"failureMessages":["expected [] to have a length of 3 but got +0"],"location":{"line":199,"column":28}},{"ancestorTitles":["","useChatRoom"],"fullName":" useChatRoom should not send empty or whitespace-only messages","status":"passed","title":"should not send empty or whitespace-only messages","duration":1,"failureMessages":[]},{"ancestorTitles":["","useChatRoom"],"fullName":" useChatRoom should enforce message length limit","status":"passed","title":"should enforce message length limit","duration":0,"failureMessages":[]},{"ancestorTitles":["","useChatRoom"],"fullName":" useChatRoom should handle user left event","status":"failed","title":"should handle user left event","duration":1,"failureMessages":["expected 2 to be 1 // Object.is equality"],"location":{"line":275,"column":31}},{"ancestorTitles":["","useChatRoom"],"fullName":" useChatRoom should handle error events from server","status":"passed","title":"should handle error events from server","duration":1,"failureMessages":[]},{"ancestorTitles":["","useChatRoom"],"fullName":" useChatRoom should receive and display system messages","status":"passed","title":"should receive and display system messages","duration":0,"failureMessages":[]},{"ancestorTitles":["","useChatRoom"],"fullName":" useChatRoom should rejoin room after reconnection","status":"passed","title":"should rejoin room after reconnection","duration":0,"failureMessages":[]},{"ancestorTitles":["","useChatRoom"],"fullName":" useChatRoom should leave current room before joining new room","status":"failed","title":"should leave current room before joining new room","duration":1,"failureMessages":["expected \"spy\" to be called with arguments: [ 'leave_room', 'room-1' ]\u001b[90m\n\nReceived: \n\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[39m"],"location":{"line":364,"column":29}}],"startTime":1768799517004,"endTime":1768799517027,"status":"failed","message":"","name":"C:/ClaudeCode/nuxt-chat/frontend/app/composables/__tests__/useChatRoom.spec.ts"},{"assertionResults":[{"ancestorTitles":["","useSocket"],"fullName":" useSocket should connect to server","status":"failed","title":"should connect to server","duration":10,"failureMessages":["expected false to be true // Object.is equality"],"location":{"line":39,"column":29}},{"ancestorTitles":["","useSocket"],"fullName":" useSocket should disconnect from server","status":"passed","title":"should disconnect from server","duration":2,"failureMessages":[]},{"ancestorTitles":["","useSocket"],"fullName":" useSocket should register event listener","status":"failed","title":"should register event listener","duration":2,"failureMessages":["undefined is not a spy or a call to a spy!"],"location":{"line":72,"column":30}},{"ancestorTitles":["","useSocket"],"fullName":" useSocket should emit event to server","status":"failed","title":"should emit event to server","duration":2,"failureMessages":["undefined is not a spy or a call to a spy!"],"location":{"line":91,"column":32}},{"ancestorTitles":["","useSocket"],"fullName":" useSocket should auto reconnect on disconnect","status":"failed","title":"should auto reconnect on disconnect","duration":103,"failureMessages":["expected false to be true // Object.is equality"],"location":{"line":118,"column":29}},{"ancestorTitles":["","useSocket"],"fullName":" useSocket should handle connection error","status":"passed","title":"should handle connection error","duration":1,"failureMessages":[]},{"ancestorTitles":["","useSocket"],"fullName":" useSocket should use correct socket URL","status":"passed","title":"should use correct socket URL","duration":0,"failureMessages":[]},{"ancestorTitles":["","useSocket"],"fullName":" useSocket should reuse socket instance","status":"passed","title":"should reuse socket instance","duration":0,"failureMessages":[]},{"ancestorTitles":["","useSocket"],"fullName":" useSocket should remove event listener","status":"passed","title":"should remove event listener","duration":0,"failureMessages":[]},{"ancestorTitles":["","useSocket"],"fullName":" useSocket should update connected state on socket events","status":"failed","title":"should update connected state on socket events","duration":1,"failureMessages":["expected false to be true // Object.is equality"],"location":{"line":220,"column":29}}],"startTime":1768799516933,"endTime":1768799517054,"status":"failed","message":"","name":"C:/ClaudeCode/nuxt-chat/frontend/app/composables/__tests__/useSocket.spec.ts"},{"assertionResults":[{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should render ChatWindow component","status":"failed","title":"should render ChatWindow component","duration":30,"failureMessages":["expected false to be true // Object.is equality"],"location":{"line":63,"column":67}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should display messages from useChatRoom","status":"failed","title":"should display messages from useChatRoom","duration":4,"failureMessages":["Cannot call props on an empty VueWrapper."],"location":{"line":1574,"column":27}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should call sendMessage when MessageInput emits send event","status":"failed","title":"should call sendMessage when MessageInput emits send event","duration":3,"failureMessages":["Cannot call vm on an empty VueWrapper."],"location":{"line":1574,"column":27}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should call joinRoom on mount","status":"failed","title":"should call joinRoom on mount","duration":2,"failureMessages":["expected \"spy\" to be called at least once"],"location":{"line":140,"column":38}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should call leaveRoom on unmount","status":"failed","title":"should call leaveRoom on unmount","duration":4,"failureMessages":["expected \"spy\" to be called at least once"],"location":{"line":161,"column":39}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should show empty state when no messages","status":"failed","title":"should show empty state when no messages","duration":2,"failureMessages":["expected '' to contain '메시지가 없습니다'"],"location":{"line":180,"column":28}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should display online users count","status":"failed","title":"should display online users count","duration":2,"failureMessages":["expected '' to contain '5'"],"location":{"line":199,"column":28}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should auto scroll to bottom when new message arrives","status":"failed","title":"should auto scroll to bottom when new message arrives","duration":1,"failureMessages":["expected \"spy\" to be called at least once"],"location":{"line":241,"column":28}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should rejoin when roomId prop changes","status":"failed","title":"should rejoin when roomId prop changes","duration":2,"failureMessages":["expected \"spy\" to be called at least once"],"location":{"line":263,"column":39}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should show loading state while connecting","status":"failed","title":"should show loading state while connecting","duration":3,"failureMessages":["expected false to be true // Object.is equality"],"location":{"line":285,"column":64}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should display error message when error occurs","status":"failed","title":"should display error message when error occurs","duration":2,"failureMessages":["expected false to be true // Object.is equality"],"location":{"line":307,"column":68}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should format message timestamps correctly","status":"failed","title":"should format message timestamps correctly","duration":20,"failureMessages":["expected '' to contain '오후 02:11'"],"location":{"line":341,"column":28}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should display user list sidebar","status":"failed","title":"should display user list sidebar","duration":4,"failureMessages":["expected false to be true // Object.is equality"],"location":{"line":361,"column":35}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should clear input field after sending message","status":"failed","title":"should clear input field after sending message","duration":1,"failureMessages":["Cannot call vm on an empty VueWrapper."],"location":{"line":1574,"column":27}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should display connection status","status":"failed","title":"should display connection status","duration":4,"failureMessages":["expected false to be true // Object.is equality"],"location":{"line":400,"column":72}},{"ancestorTitles":["","ChatWindow"],"fullName":" ChatWindow should support infinite scroll for messages","status":"failed","title":"should support infinite scroll for messages","duration":4,"failureMessages":["expected false to be true // Object.is equality"],"location":{"line":427,"column":67}}],"startTime":1768799517017,"endTime":1768799517106,"status":"failed","message":"","name":"C:/ClaudeCode/nuxt-chat/frontend/app/components/chat/__tests__/ChatWindow.spec.ts"}]}
